import{p as Ne,a as y,s as B,b as W,o as Ve,c as Be,u as ae,g as n,i as ie,d as oe,t as re,e as be,f as T,h as He,j as de,k as D,l as Qe,m as F,n as L,q as X,r as M,v as _,w as Y,x as w,y as G,z as P,A as p,B as ce,C as je,D as fe}from"./external.XVS9OJZd.js";const qe=(()=>{let d=!1;try{const s=Object.defineProperty({},"passive",{get(){return d={passive:!0},!0}});window.addEventListener("testpassive",s,s),window.remove("testpassive",s,s)}catch{}return d})();var Ze=de('<table class="vtlist-inner"><!><tbody><!></tbody></table> <!>',1),Je=de('<div class="vtlist-inner"><!> <!> <!></div>'),Ke=de("<div><!></div>");function Xe(d,s){Ne(s,!0);var U;(function(t){t[t.OBSERVED=0]="OBSERVED",t[t.REQUESTED=1]="REQUESTED"})(U||(U={}));const u=y(s,"items",19,()=>[]),Q=y(s,"isDisabled",3,!1),g=y(s,"isHorizontal",3,!1),j=y(s,"isTable",3,!1),ye=y(s,"preRenderCount",3,6),Z=y(s,"scrollToAlignment",19,()=>H.AUTO),_e=y(s,"scrollToBehaviour",19,()=>Se.INSTANT),Ie=y(s,"class",3,""),Ee=y(s,"style",3,""),Oe=3;let $=!1,A=-1,v,I,k=B(0),N=B(0),E=B(0),O=B(ye()-1),q=B(0),b=B(W({offset:s.scrollToOffset||s.scrollToIndex!==void 0&&u().length&&ne(s.scrollToIndex)&&1||0,scrollChangeReason:U.REQUESTED})),ee;const te=w(()=>new Array(u().length)),S=w(()=>u().map((e,l)=>{var a;let i=(a=s.sizingCalculator)==null?void 0:a.call(s,l,e);return i!==void 0||(i=n(te)[l],i!==void 0)?i:n(q)})),h=w(()=>{const t=[];return n(S).reduce((e,l)=>(t.push(e),e+l),0),t}),ue=w(()=>{if(!u()||Q())return[];const t=[];for(let e=n(E);e<=n(O);(e+=1)-1){const l=u()[e];l&&t.push({item:l,index:e,size:n(S)[e]})}return t}),J=()=>n(h).length>0?n(h)[n(h).length-1]+n(S)[n(S).length-1]:0,ze=w(()=>fe(!Q()&&"overflow:auto;",Ee())),he=w(()=>{const t=n(h)[n(E)]?n(h)[n(E)]:0,e=n(h)[n(O)]?J()-n(h)[n(O)]-n(S)[n(O)]:0;return fe(!j()&&"display:flex;",!j()&&(!g()&&"flex-direction:column;"||"flex-direction:row;"),!Q()&&(!g()&&`margin-top:${t}px;margin-bottom:${e}px`||`margin-left:${t}px;margin-right:${e}px;width:${J()-e-t}px`))});Ve(()=>{v.addEventListener("scroll",me,qe),le(),s.scrollToOffset!==void 0?se(s.scrollToOffset):s.scrollToIndex!==void 0&&se(ne(s.scrollToIndex)),$=!0}),Be(()=>{$&&v.removeEventListener("scroll",me)}),ae(()=>{s.scrollToIndex,Z(),s.scrollToOffset,u().length,s.sizingCalculator,ge()}),ae(()=>{n(E),n(O),ge()}),ae(()=>{n(b).scrollChangeReason===U.REQUESTED?se(n(b).offset):le()});let o={};async function ge(){if(!$)return;s.scrollToIndex&&s.scrollToOffset&&console.error("VirtualList: scrollToIndex and scrollToOffset MUST NOT be used together.");const t=(o==null?void 0:o.scrollToIndex)!==s.scrollToIndex||(o==null?void 0:o.scrollToAlignment)!==Z(),e=(o==null?void 0:o.modelCount)!==u().length||(o==null?void 0:o.sizingCalculator)!==s.sizingCalculator||(o==null?void 0:o.avgSizeInPx)!==n(q)||(o==null?void 0:o.clientHeight)!==n(k)||(o==null?void 0:o.clientWidth)!==n(N);if(e&&await Ce(),(o==null?void 0:o.scrollToOffset)!==s.scrollToOffset?D(b,W({offset:s.scrollToOffset||0,scrollChangeReason:U.REQUESTED})):typeof s.scrollToIndex=="number"&&(t||e)&&D(b,W({offset:ne(s.scrollToIndex),scrollChangeReason:U.REQUESTED})),s.onVisibleRangeUpdate&&((o==null?void 0:o.startIdx)!==n(E)||(o==null?void 0:o.endIdx)!==n(O))){const i=ve(g()?n(N):n(k),n(b).offset);s.onVisibleRangeUpdate(i)}o={scrollToIndex:s.scrollToIndex,scrollToAlignment:Z(),scrollToOffset:s.scrollToOffset,modelCount:u().length,sizingCalculator:s.sizingCalculator,avgSizeInPx:n(q),clientHeight:n(k),clientWidth:n(N),startIdx:n(E),endIdx:n(O)}}async function Ce(t=0){A=Math.min(A,t-1),await le()}function me(t){var l;const e=g()?v.scrollLeft:v.scrollTop;t.target!==v||e<0||n(b).offset===e||(ee==null?void 0:ee.offset)!==e&&(D(b,W({offset:e,scrollChangeReason:U.OBSERVED})),(l=s.onAfterScroll)==null||l.call(s,{offset:e,event:t}))}function ne(t,e=Z(),l=u().length){return t<0?t=0:t>=l&&(t=l-1),Re(e,g()?n(N):n(k),n(b).offset,t)}function Re(t=H.START,e,l,i){if(e<=0)return 0;const a=n(S)[i],r=n(h)[i],c=r-e+a;let f;switch(t){case H.END:f=c;break;case H.CENTER:f=r-(e-a)/2;break;case H.START:f=r;break;default:f=Math.max(c,Math.min(r,l))}return Math.max(0,Math.min(J()-e,f))}function De(t){if(isNaN(t))throw Error(`Invalid offset ${t} specified`);t=Math.max(0,t);const e=Fe(),l=Math.max(0,A);return e.offset>=t?Te(0,l,t):Me(l,t)}function Fe(){return A>=0?{offset:n(h)[A],size:n(S)[A]}:{offset:0,size:0}}function Te(t,e,l){let i=0,a=0;for(;t<=e;){if(i=t+Math.floor((e-t)/2),a=n(h)[i],a===l)return i;a<l?t=i+1:a>l&&(e=i-1)}return t>0?t-1:0}function Me(t,e){let l=1;for(;t<u().length&&n(h)[t]<e;)t+=l,l*=2;return Te(Math.floor(t/2),Math.min(t,u().length-1),e)}async function le(){n(q)||D(q,W(Ue()));const t=ve(g()?n(N):n(k),n(b).offset,Oe);D(E,W(t.start)),D(O,W(t.end)),await Qe();let e=0;const l={},i=j()?I.querySelector("tbody").children:I.children;for(let a=0;a<i.length;(a+=1)-1){const r=i[a],c=getComputedStyle(r),f=c.position;if(f&&["absolute","fixed"].includes(f))continue;const m=c.display!=="none"?xe(r):0,x=n(E)+e;l[x]=(l[x]||0)+m,e+=1}for(const a of Object.keys(l)){const r=parseInt(a);n(te)[r]!==l[r]&&(n(te)[r]=l[r])}}function Ue(){const e=[],l=j()?I.querySelector("tbody").children:I.children;for(let i=0;i<l.length;(i+=1)-1){const a=l[i],r=getComputedStyle(a);if(["absolute","fixed"].includes(r.position))continue;const c=xe(a);if(e.push(c),e.length>=10)break}return e.length===0?0:e.reduce((i,a)=>i+a,0)/e.length}function We(t){const e=getComputedStyle(t);let l=parseFloat(g()?e.width:e.height);return e.boxSizing==="border-box"&&(g()?l-=parseFloat(e.borderLeftWidth)-parseFloat(e.borderRightWidth):l-=parseFloat(e.borderTopWidth)-parseFloat(e.borderBottomWidth)),l}function ve(t=0,e,l=0){if(J()===0)return{start:0,end:0};const i=e+t;let a=De(e);if(a===void 0)throw Error(`Invalid offset ${e} specified`);let r=n(h)[a]+n(S)[a],c=a;for(;r<i&&c<u().length-1;)c+=1,r+=n(S)[c];return l>0&&(a=Math.max(0,a-l),c=Math.min(c+l,u().length-1)),{start:a,end:c}}function xe(t){const e=getComputedStyle(t);let l=We(t);return g()?l+=parseFloat(e.borderLeftWidth)+parseFloat(e.borderRightWidth)+parseFloat(e.marginLeft)+parseFloat(e.marginRight):l+=parseFloat(e.borderTopWidth)+parseFloat(e.borderBottomWidth)+parseFloat(e.marginTop)+parseFloat(e.marginBottom),Number.isNaN(l)?0:l}function se(t){if("scroll"in v){const e={behavior:_e()};e[g()?"left":"top"]=t,v.scroll(e)}else v[g()?"scrollLeft":"scrollTop"]=t}var z=Ke();const we=w(()=>fe("vtlist",Ie()));var Ae=G(z);ie(Ae,j,t=>{var e=Ze(),l=_(e),i=G(l);F(i,()=>s.header??L);var a=X(i),r=G(a);ie(r,Q,f=>{var m=M(),x=_(m);Y(x,17,u,P,(C,R,V)=>{var K=M(),ke=_(K);F(ke,()=>s.vl_slot,()=>({index:V,item:n(R)})),T(C,K)}),T(f,m)},f=>{var m=M(),x=_(m);Y(x,17,()=>n(ue),P,(C,R)=>{var V=M(),K=_(V);F(K,()=>s.vl_slot,()=>n(R)),T(C,V)}),T(f,m)}),p(a),p(l),oe(l,f=>I=f,()=>I);var c=X(l,2);F(c,()=>s.footer??L),re(()=>ce(l,"style",n(he))),T(t,e)},t=>{var e=Je(),l=G(e);F(l,()=>s.header??L);var i=X(l,2);ie(i,Q,r=>{var c=M(),f=_(c);Y(f,17,u,P,(m,x,C)=>{var R=M(),V=_(R);F(V,()=>s.vl_slot,()=>({index:C,item:n(x)})),T(m,R)}),T(r,c)},r=>{var c=M(),f=_(c);Y(f,17,()=>n(ue),P,(m,x)=>{var C=M(),R=_(C);F(R,()=>s.vl_slot,()=>n(x)),T(m,C)}),T(r,c)});var a=X(i,2);F(a,()=>s.footer??L),p(e),oe(e,r=>I=r,()=>I),re(()=>ce(e,"style",n(he))),T(t,e)}),p(z),oe(z,t=>v=t,()=>v),re(()=>{je(z,n(we)),ce(z,"style",n(ze))}),be(z,"clientHeight",t=>D(k,t)),be(z,"clientWidth",t=>D(N,t)),T(d,z),He()}var Se=(d=>(d.AUTO="auto",d.SMOOTH="smooth",d.INSTANT="instant",d))(Se||{}),H=(d=>(d.AUTO="auto",d.START="start",d.CENTER="center",d.END="end",d))(H||{});export{H as A,Se as S,Xe as V};
