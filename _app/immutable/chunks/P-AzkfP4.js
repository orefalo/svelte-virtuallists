import{p as Qe,a as z,s as W,b as A,o as je,c as qe,u as ae,t as de,i as ie,d as oe,e as re,f as ye,g as x,h as Ze,j as fe,k as Je,l as Ke,m as ce,n,q as E,r as Q,v as Le,w as X,x as Y,y as C,z as w,A as G,B as P,C as F,D as p,E as _e}from"./Hb09kDf2.js";const Xe=(()=>{let d=!1;try{const s=Object.defineProperty({},"passive",{get(){return d={passive:!0},!0}});window.addEventListener("testpassive",s,s),window.remove("testpassive",s,s)}catch{}return d})();var Ye=de('<table class="vtlist-inner"><!><tbody><!></tbody></table> <!>',1),Ge=de('<div class="vtlist-inner"><!> <!> <!></div>'),Pe=de("<div><!></div>");function $e(d,s){Qe(s,!0);var U;(function(t){t[t.OBSERVED=0]="OBSERVED",t[t.REQUESTED=1]="REQUESTED"})(U||(U={}));const h=z(s,"items",19,()=>[]),q=z(s,"isDisabled",3,!1),T=z(s,"isHorizontal",3,!1),J=z(s,"isTable",3,!1),Ee=z(s,"preRenderCount",3,6),K=z(s,"scrollToAlignment",19,()=>j.AUTO),Oe=z(s,"scrollToBehaviour",19,()=>Ie.INSTANT),ze=z(s,"class",3,""),Ce=z(s,"style",3,""),Me=3;let $=!1,k=-1,b,N=W(void 0),V=W(0),B=W(0),M=W(0),S=W(Ee()-1),Z=W(0),O=W(A({offset:s.scrollToOffset||0,scrollChangeReason:U.REQUESTED})),ee;const te=Q(()=>new Array(h().length)),v=Q(()=>h().map((e,l)=>{var a;let o=(a=s.sizingCalculator)==null?void 0:a.call(s,l,e);return o!==void 0||(o=n(te)[l],o!==void 0)?o:n(Z)})),g=Q(()=>{const t=[];return n(v).reduce((e,l)=>(t.push(e),e+l),0),t}),ue=Q(()=>{if(!h()||q())return[];const t=[];for(let e=n(M);e<=n(S);e++){const l=h()[e];l&&t.push({item:l,index:e,size:n(v)[e]})}return t}),ne=()=>n(g).length>0?n(g)[n(g).length-1]+n(v)[n(v).length-1]:0,Re=Q(()=>fe(!q()&&"overflow:auto;",Ce())),he=Q(()=>{const t=n(g)[n(M)]?n(g)[n(M)]:0,e=n(S)>0?ne()-(n(g)[Math.min(n(S),n(g).length-1)]+n(v)[Math.min(n(S),n(v).length-1)]):0;return fe(!J()&&"display:flex;",!J()&&(!T()&&"flex-direction:column;"||"flex-direction:row;"),!q()&&(!T()&&`margin-top:${t}px;margin-bottom:${e}px`||`margin-left:${t}px;margin-right:${e}px;width:${n(g)[Math.min(n(S),n(g).length-1)]+n(v)[Math.min(n(S),n(v).length-1)]-t}px`))});je(()=>{b.addEventListener("scroll",me,Xe),le(),s.scrollToOffset!==void 0?se(s.scrollToOffset):s.scrollToIndex!==void 0&&se(ve(s.scrollToIndex)),$=!0}),qe(()=>{$&&b.removeEventListener("scroll",me)}),ae(()=>{s.scrollToIndex,K(),s.scrollToOffset,h().length,s.sizingCalculator,ge()}),ae(()=>{n(M),n(S),ge()}),ae(()=>{n(O).scrollChangeReason===U.REQUESTED?se(n(O).offset):le()});let i={};async function ge(){if(!$)return;s.scrollToIndex&&s.scrollToOffset&&console.error("VirtualList: scrollToIndex and scrollToOffset MUST NOT be used together.");const t=(i==null?void 0:i.scrollToIndex)!==s.scrollToIndex||(i==null?void 0:i.scrollToAlignment)!==K(),e=(i==null?void 0:i.modelCount)!==h().length||(i==null?void 0:i.sizingCalculator)!==s.sizingCalculator||(i==null?void 0:i.avgSizeInPx)!==n(Z)||(i==null?void 0:i.clientHeight)!==n(V)||(i==null?void 0:i.clientWidth)!==n(B);if(e&&await De(),(i==null?void 0:i.scrollToOffset)!==s.scrollToOffset?E(O,A({offset:s.scrollToOffset||0,scrollChangeReason:U.REQUESTED})):typeof s.scrollToIndex=="number"&&(t||e)&&E(O,A({offset:ve(s.scrollToIndex),scrollChangeReason:U.REQUESTED})),s.onVisibleRangeUpdate&&((i==null?void 0:i.startIdx)!==n(M)||(i==null?void 0:i.endIdx)!==n(S))){const o=xe(T()?n(B):n(V),n(O).offset);s.onVisibleRangeUpdate(o)}i={scrollToIndex:s.scrollToIndex,scrollToAlignment:K(),scrollToOffset:s.scrollToOffset,modelCount:h().length,sizingCalculator:s.sizingCalculator,avgSizeInPx:n(Z),clientHeight:n(V),clientWidth:n(B),startIdx:n(M),endIdx:n(S)}}async function De(t=0){k=Math.min(k,t-1),await le()}function me(t){var l;const e=T()?b.scrollLeft:b.scrollTop;t.target!==b||e<0||n(O).offset===e||(ee==null?void 0:ee.offset)!==e&&(E(O,A({offset:e,scrollChangeReason:U.OBSERVED})),(l=s.onAfterScroll)==null||l.call(s,{offset:e,event:t}))}function ve(t,e=K(),l=h().length){return t<0?t=0:t>=l&&(t=l-1),we(e,T()?n(B):n(V),n(O).offset,t)}function we(t=j.START,e,l,o){if(e<=0)return 0;const a=n(v)[o],c=n(g)[o],r=c-e+a;let f;switch(t){case j.END:f=r;break;case j.CENTER:f=c-(e-a)/2;break;case j.START:f=c;break;default:f=Math.max(r,Math.min(c,l))}return Math.max(0,Math.min(ne()-e,f))}function Fe(t){if(isNaN(t))throw Error(`Invalid offset ${t} specified`);t=Math.max(0,t);const e=Ue(),l=Math.max(0,k);return e.offset>=t?Te(0,l,t):We(l,t)}function Ue(){return k>=0?{offset:n(g)[k],size:n(v)[k]}:{offset:0,size:0}}function Te(t,e,l){for(;t<=e;){const o=t+(e-t>>>1),a=n(g)[o];if(a===l)return o;a<l?t=o+1:e=o-1}return Math.max(0,t-1)}function We(t,e){let l=1;for(;t<h().length&&n(g)[t]<e;)t+=l,l*=2;return Te(Math.floor(t/2),Math.min(t,h().length-1),e)}async function le(){n(Z)||E(Z,A(Ae()));const t=xe(T()?n(B):n(V),n(O).offset,Me);E(M,A(t.start)),E(S,A(t.end)),await Le();let e=0;const l=new Map,o=r=>(l.has(r)||l.set(r,getComputedStyle(r)),l.get(r)),a={},c=Se();for(let r=0;r<c.length;r++){const f=c[r],y=o(f),u=y.position;if(u&&["absolute","fixed"].includes(u))continue;const m=y.display!=="none"?be(f):0,_=n(M)+e;a[_]=(a[_]||0)+m,e++}for(const r of Object.keys(a)){const f=parseInt(r);n(te)[f]!==a[f]&&(n(te)[f]=a[f])}}function Ae(){const e=[],l=Se();for(let o=0;o<l.length;o++){const a=l[o],c=getComputedStyle(a);if(["absolute","fixed"].includes(c.position))continue;const r=be(a);if(e.push(r),e.length>=10)break}return e.length===0?0:e.reduce((o,a)=>o+a,0)/e.length}function ke(t){const e=getComputedStyle(t);let l=parseFloat(T()?e.width:e.height);return e.boxSizing==="border-box"&&(T()?l-=parseFloat(e.borderLeftWidth)-parseFloat(e.borderRightWidth):l-=parseFloat(e.borderTopWidth)-parseFloat(e.borderBottomWidth)),l}function xe(t=0,e,l=0){if(ne()===0)return{start:0,end:0};const o=e+t;let a=Fe(e);if(a===void 0)throw Error(`Invalid offset ${e} specified`);let c=n(g)[a]+n(v)[a],r=a;for(;c<o&&r<h().length-1;)r++,c+=n(v)[r];return l>0&&(a=Math.max(0,a-l),r=Math.min(r+l,h().length-1)),{start:a,end:r}}function be(t){const e=getComputedStyle(t);let l=ke(t);return T()?l+=parseFloat(e.borderLeftWidth)+parseFloat(e.borderRightWidth)+parseFloat(e.marginLeft)+parseFloat(e.marginRight):l+=parseFloat(e.borderTopWidth)+parseFloat(e.borderBottomWidth)+parseFloat(e.marginTop)+parseFloat(e.marginBottom),Number.isNaN(l)?0:l}function se(t){if("scroll"in b){const e={behavior:Oe()};e[T()?"left":"top"]=t,b.scroll(e)}else b[T()?"scrollLeft":"scrollTop"]=t}function Se(){return J()?n(N).querySelector("tbody").children:n(N).children}var R=Pe(),Ne=X(R);{var Ve=t=>{var e=Ye(),l=C(e),o=X(l);w(o,()=>s.header??G);var a=P(o),c=X(a);{var r=u=>{var m=F(),_=C(m);p(_,17,h,_e,(I,D,H)=>{var L=F(),He=C(L);w(He,()=>s.vl_slot,()=>({index:H,item:n(D)})),x(I,L)}),x(u,m)},f=u=>{var m=F(),_=C(m);p(_,17,()=>n(ue),I=>I.index,(I,D)=>{var H=F(),L=C(H);w(L,()=>s.vl_slot,()=>n(D)),x(I,H)}),x(u,m)};ie(c,u=>{q()?u(r):u(f,!1)})}Y(a),Y(l),oe(l,u=>E(N,u),()=>n(N));var y=P(l,2);w(y,()=>s.footer??G),re(()=>ce(l,"style",n(he))),x(t,e)},Be=t=>{var e=Ge(),l=X(e);w(l,()=>s.header??G);var o=P(l,2);{var a=f=>{var y=F(),u=C(y);p(u,17,h,_e,(m,_,I)=>{var D=F(),H=C(D);w(H,()=>s.vl_slot,()=>({index:I,item:n(_)})),x(m,D)}),x(f,y)},c=f=>{var y=F(),u=C(y);p(u,16,()=>n(ue),m=>m,(m,_)=>{var I=F(),D=C(I);w(D,()=>s.vl_slot,()=>_),x(m,I)}),x(f,y)};ie(o,f=>{q()?f(a):f(c,!1)})}var r=P(o,2);w(r,()=>s.footer??G),Y(e),oe(e,f=>E(N,f),()=>n(N)),re(()=>ce(e,"style",n(he))),x(t,e)};ie(Ne,t=>{J()?t(Ve):t(Be,!1)})}Y(R),oe(R,t=>b=t,()=>b),re(t=>{Je(R,1,Ke(t)),ce(R,"style",n(Re))},[()=>fe("vtlist",ze())]),ye(R,"clientHeight",t=>E(V,t)),ye(R,"clientWidth",t=>E(B,t)),x(d,R),Ze()}var Ie=(d=>(d.AUTO="auto",d.SMOOTH="smooth",d.INSTANT="instant",d))(Ie||{}),j=(d=>(d.AUTO="auto",d.START="start",d.CENTER="center",d.END="end",d))(j||{});export{j as A,Ie as S,$e as V};
