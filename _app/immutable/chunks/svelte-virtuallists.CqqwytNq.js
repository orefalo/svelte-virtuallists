import{p as He,a as E,s as B,b as W,o as Qe,c as je,u as re,g as n,d as fe,i as A,t as ce,e as _e,f as g,h as qe,j as he,k as F,l as b,m as v,n as M,q as Y,r as G,v as _,w as P,x as p,y as $,z as de,A as Ze,B as ue}from"./external.C0RecZlA.js";const Je=(()=>{let h=!1;try{const o=Object.defineProperty({},"passive",{get(){return h={passive:!0},!0}});window.addEventListener("testpassive",o,o),window.remove("testpassive",o,o)}catch{}return h})();var Ke=he('<table class="vtlist-inner"><!><tbody><!></tbody></table> <!>',1),Le=he('<div class="vtlist-inner"><!> <!> <!></div>'),Xe=he("<div><!></div>");function Ge(h,o){He(o,!0);var U;(function(e){e[e.OBSERVED=0]="OBSERVED",e[e.REQUESTED=1]="REQUESTED"})(U||(U={}));const u=E(o,"items",19,()=>[]),Q=E(o,"isDisabled",3,!1),x=E(o,"isHorizontal",3,!1),j=E(o,"isTable",3,!1),ye=E(o,"preRenderCount",3,6),J=E(o,"scrollToAlignment",19,()=>H.AUTO),ze=E(o,"scrollToBehaviour",19,()=>Se.INSTANT),Ie=E(o,"class",3,""),Ee=E(o,"style",3,""),Oe=3;let ee=!1,w=-1,y,O,N=B(0),V=B(0),q=B(0),te=B(ye()-1),Z=B(0),z=B(W({offset:o.scrollToOffset||o.scrollToIndex!==void 0&&u().length&&se(o.scrollToIndex)&&1||0,scrollChangeReason:U.REQUESTED})),S;const K=_(()=>{var t;const e=(((t=u())==null?void 0:t.length)||1)-1;return n(te)<e?n(te):e}),ne=_(()=>new Array(u().length)),I=_(()=>u().map((e,t)=>{var i;let l=(i=o.sizingCalculator)==null?void 0:i.call(o,t,e);return l!==void 0||(l=n(ne)[t],l!==void 0)?l:n(Z)})),T=_(()=>{const e=[];return n(I).reduce((t,l)=>(e.push(t),t+l),0),e}),ge=_(()=>{if(!u()||Q())return[];const e=[];for(let t=n(q);t<=n(K);(t+=1)-1){const l=u()[t];l&&e.push({item:l,index:t,size:n(I)[t]})}return e}),le=_(()=>n(T)[n(q)]?n(T)[n(q)]:0),L=_(()=>n(T).length>0?n(T)[n(T).length-1]+n(I)[n(I).length-1]:0),oe=_(()=>n(T)[n(K)]?n(L)-n(T)[n(K)]-n(I)[n(K)]:0),Ce=_(()=>ue(!Q()&&"overflow:auto;",Ee())),me=_(()=>ue(!j()&&"display:flex;",!j()&&(!x()&&"flex-direction:column;"||"flex-direction:row;"),!Q()&&(!x()&&`margin-top:${n(le)}px;margin-bottom:${n(oe)}px`||`margin-left:${n(le)}px;margin-right:${n(oe)}px;width:${n(L)-n(oe)-n(le)}px`)));Qe(()=>{y.addEventListener("scroll",ve,Je),ae(),o.scrollToOffset!==void 0?ie(o.scrollToOffset):o.scrollToIndex!==void 0&&ie(se(o.scrollToIndex)),ee=!0}),je(()=>{ee&&y.removeEventListener("scroll",ve)}),re(()=>{o.scrollToIndex,J(),o.scrollToOffset,u().length,o.sizingCalculator,Re()}),re(()=>{if(o.onVisibleRangeUpdate){const e=be(x()?n(V):n(N),n(z).offset);o.onVisibleRangeUpdate(e)}}),re(()=>{const{offset:e,scrollChangeReason:t}=n(z);((S==null?void 0:S.offset)!==e||(S==null?void 0:S.scrollChangeReason)!==t)&&ae(),(S==null?void 0:S.offset)!==e&&t===U.REQUESTED&&ie(e),S=n(z)});let r={};function Re(){if(!ee)return;o.scrollToIndex&&o.scrollToOffset&&console.log("VirtualList: scrollToIndex and scrollToOffset MUST NOT be used together.");const e=(r==null?void 0:r.scrollToIndex)!==o.scrollToIndex||(r==null?void 0:r.scrollToAlignment)!==J(),t=(r==null?void 0:r.modelCount)!==u().length||(r==null?void 0:r.sizingCalculator)!==o.sizingCalculator||(r==null?void 0:r.avgSizeInPx)!==n(Z)||(r==null?void 0:r.clientHeight)!==n(N)||(r==null?void 0:r.clientWidth)!==n(V);t&&De(),(r==null?void 0:r.scrollToOffset)!==o.scrollToOffset?F(z,W({offset:o.scrollToOffset||0,scrollChangeReason:U.REQUESTED})):typeof o.scrollToIndex=="number"&&(e||t)&&F(z,W({offset:se(o.scrollToIndex),scrollChangeReason:U.REQUESTED})),r={scrollToIndex:o.scrollToIndex,scrollToAlignment:J(),scrollToOffset:o.scrollToOffset,modelCount:u().length,sizingCalculator:o.sizingCalculator,avgSizeInPx:n(Z),clientHeight:n(N),clientWidth:n(V)}}function De(e=0){w=Math.min(w,e-1),ae()}function ve(e){var l;const t=Ne(y);e.target!==y||t<0||n(z).offset===t||(F(z,W({offset:t,scrollChangeReason:U.OBSERVED})),(l=o.onAfterScroll)==null||l.call(o,{offset:t,event:e}))}function se(e,t=J(),l=u().length){return e<0?e=0:e>=l&&(e=l-1),Fe(t,x()?n(V):n(N),n(z).offset||0,e)}function Fe(e=H.START,t,l,i){if(t<=0)return 0;const f=n(I)[i],s=n(T)[i],c=s-t+f;let a;switch(e){case H.END:a=c;break;case H.CENTER:a=s-(t-f)/2;break;case H.START:a=s;break;default:a=Math.max(c,Math.min(s,l))}const d=n(L);return Math.max(0,Math.min(d-t,a))}function Me(e){if(isNaN(e))throw Error(`Invalid offset ${e} specified`);e=Math.max(0,e);const t=Ue(),l=Math.max(0,w);return t.offset>=e?Te(0,l,e):We(l,e)}function Ue(){return w>=0?{offset:n(T)[w],size:n(I)[w]}:{offset:0,size:0}}function Te(e,t,l){let i=0,f=0;for(;e<=t;){if(i=e+Math.floor((t-e)/2),f=n(T)[i],f===l)return i;f<l?e=i+1:f>l&&(t=i-1)}return e>0?e-1:0}function We(e,t){let l=1;for(;e<u().length&&n(T)[e]<t;)e+=l,l*=2;return Te(Math.floor(e/2),Math.min(e,u().length-1),t)}function ae(){n(Z)||F(Z,W(Ae()));const e=be(x()?n(V):n(N),n(z).offset,Oe);F(q,W(e.start)),F(te,W(e.end));let t=0;const l={},i=j()?O.querySelector("tbody").children:O.children;for(let f=0;f<i.length;(f+=1)-1){const s=i[f],c=getComputedStyle(s),a=c.position;if(a&&["absolute","fixed"].includes(a))continue;const d=c.display!=="none"?xe(s):0,m=n(q)+t;l[m]=(l[m]||0)+d,t+=1}for(const f of Object.keys(l)){const s=parseInt(f);n(ne)[s]!==l[s]&&(n(ne)[s]=l[s])}}function Ae(){const t=[],l=j()?O.querySelector("tbody").children:O.children;for(let i=0;i<l.length;(i+=1)-1){const f=l[i],s=getComputedStyle(f);if(["absolute","fixed"].includes(s.position))continue;const c=xe(f);if(t.push(c),t.length>=10)break}return t.length===0?0:t.reduce((i,f)=>i+f,0)/t.length}function we(e){const t=getComputedStyle(e);let l=parseFloat(x()?t.width:t.height);return t.boxSizing==="border-box"&&(x()?l-=parseFloat(t.borderLeftWidth)-parseFloat(t.borderRightWidth):l-=parseFloat(t.borderTopWidth)-parseFloat(t.borderBottomWidth)),l}function be(e=0,t,l=0){if(n(L)===0)return{start:0,end:0};const f=t+e;let s=Me(t);if(s===void 0)throw Error(`Invalid offset ${t} specified`);let c=n(T)[s]+n(I)[s],a=s;for(;c<f&&a<u().length-1;)a+=1,c+=n(I)[a];return l>0&&(s=Math.max(0,s-l),a=Math.min(a+l,u().length-1)),{start:s,end:a}}function xe(e){const t=getComputedStyle(e);let l=we(e);return x()?l+=parseFloat(t.borderLeftWidth)+parseFloat(t.borderRightWidth)+parseFloat(t.marginLeft)+parseFloat(t.marginRight):l+=parseFloat(t.borderTopWidth)+parseFloat(t.borderBottomWidth)+parseFloat(t.marginTop)+parseFloat(t.marginBottom),Number.isNaN(l)?0:l}function Ne(e){return x()?e.scrollLeft:e.scrollTop}function ie(e){if("scroll"in y){const t={behavior:ze()};t[x()?"left":"top"]=e,y.scroll(t)}else y[x()?"scrollLeft":"scrollTop"]=e}var C=Xe();fe(C,e=>y=e,()=>y);const Ve=_(()=>ue("vtlist",Ie()));var ke=P(C);A(ke,j,e=>{var t=Ke(),l=v(t);fe(l,a=>O=a,()=>O);var i=P(l);A(i,()=>o.header,a=>{var d=b(),m=v(d);M(m,()=>o.header),g(a,d)});var f=Y(i),s=P(f);A(s,Q,a=>{var d=b(),m=v(d);G(m,17,u,p,(R,D,k)=>{var X=b(),Be=v(X);M(Be,()=>o.vl_slot,()=>({index:k,item:n(D)})),g(R,X)}),g(a,d)},a=>{var d=b(),m=v(d);G(m,17,()=>n(ge),p,(R,D)=>{var k=b(),X=v(k);M(X,()=>o.vl_slot,()=>n(D)),g(R,k)}),g(a,d)}),$(f),$(l);var c=Y(l,2);A(c,()=>o.footer,a=>{var d=b(),m=v(d);M(m,()=>o.footer),g(a,d)}),ce(()=>de(l,"style",n(me))),g(e,t)},e=>{var t=Le();fe(t,s=>O=s,()=>O);var l=P(t);A(l,()=>o.header,s=>{var c=b(),a=v(c);M(a,()=>o.header),g(s,c)});var i=Y(l,2);A(i,Q,s=>{var c=b(),a=v(c);G(a,17,u,p,(d,m,R)=>{var D=b(),k=v(D);M(k,()=>o.vl_slot,()=>({index:R,item:n(m)})),g(d,D)}),g(s,c)},s=>{var c=b(),a=v(c);G(a,17,()=>n(ge),p,(d,m)=>{var R=b(),D=v(R);M(D,()=>o.vl_slot,()=>n(m)),g(d,R)}),g(s,c)});var f=Y(i,2);A(f,()=>o.footer,s=>{var c=b(),a=v(c);M(a,()=>o.footer),g(s,c)}),$(t),ce(()=>de(t,"style",n(me))),g(e,t)}),$(C),ce(()=>{Ze(C,n(Ve)),de(C,"style",n(Ce))}),_e(C,"clientHeight",e=>F(N,e)),_e(C,"clientWidth",e=>F(V,e)),g(h,C),qe()}var Se=(h=>(h.AUTO="auto",h.SMOOTH="smooth",h.INSTANT="instant",h))(Se||{}),H=(h=>(h.AUTO="auto",h.START="start",h.CENTER="center",h.END="end",h))(H||{});export{H as A,Se as S,Ge as V};
