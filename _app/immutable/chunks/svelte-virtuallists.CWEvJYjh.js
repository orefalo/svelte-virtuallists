import{p as ke,a as I,s as H,b as W,o as Ne,c as Ve,u as se,g as n,d as ie,i as w,t as oe,e as xe,f as g,h as Be,j as ce,k as F,l as He,m as x,n as v,q as M,r as X,v as Y,w as A,x as G,y as P,z as p,A as re,B as Qe,C as fe}from"./external.BW6pQqo1.js";const je=(()=>{let u=!1;try{const l=Object.defineProperty({},"passive",{get(){return u={passive:!0},!0}});window.addEventListener("testpassive",l,l),window.remove("testpassive",l,l)}catch{}return u})();var qe=ce('<table class="vtlist-inner"><!><tbody><!></tbody></table> <!>',1),Ze=ce('<div class="vtlist-inner"><!> <!> <!></div>'),Je=ce("<div><!></div>");function Le(u,l){ke(l,!0);var U;(function(t){t[t.OBSERVED=0]="OBSERVED",t[t.REQUESTED=1]="REQUESTED"})(U||(U={}));const h=I(l,"items",19,()=>[]),j=I(l,"isDisabled",3,!1),b=I(l,"isHorizontal",3,!1),q=I(l,"isTable",3,!1),_e=I(l,"preRenderCount",3,6),J=I(l,"scrollToAlignment",19,()=>Q.AUTO),Se=I(l,"scrollToBehaviour",19,()=>be.INSTANT),ye=I(l,"class",3,""),Ie=I(l,"style",3,""),Ee=3;let $=!1,k=-1,_,E,N=H(0),V=H(0),O=H(0),z=H(_e()-1),Z=H(0),y=H(W({offset:l.scrollToOffset||l.scrollToIndex!==void 0&&h().length&&ne(l.scrollToIndex)&&1||0,scrollChangeReason:U.REQUESTED})),ee;const te=A(()=>new Array(h().length)),S=A(()=>h().map((e,a)=>{var s;let i=(s=l.sizingCalculator)==null?void 0:s.call(l,a,e);return i!==void 0||(i=n(te)[a],i!==void 0)?i:n(Z)})),T=A(()=>{const t=[];return n(S).reduce((e,a)=>(t.push(e),e+a),0),t}),de=A(()=>{if(!h()||j())return[];const t=[];for(let e=n(O);e<=n(z);(e+=1)-1){const a=h()[e];a&&t.push({item:a,index:e,size:n(S)[e]})}return t}),K=()=>n(T).length>0?n(T)[n(T).length-1]+n(S)[n(S).length-1]:0,Oe=A(()=>fe(!j()&&"overflow:auto;",Ie())),ue=A(()=>{const t=n(T)[n(O)]?n(T)[n(O)]:0,e=n(T)[n(z)]?K()-n(T)[n(z)]-n(S)[n(z)]:0;return fe(!q()&&"display:flex;",!q()&&(!b()&&"flex-direction:column;"||"flex-direction:row;"),!j()&&(!b()&&`margin-top:${t}px;margin-bottom:${e}px`||`margin-left:${t}px;margin-right:${e}px;width:${K()-e-t}px`))});Ne(()=>{_.addEventListener("scroll",ge,je),le(),l.scrollToOffset!==void 0?ae(l.scrollToOffset):l.scrollToIndex!==void 0&&ae(ne(l.scrollToIndex)),$=!0}),Ve(()=>{$&&_.removeEventListener("scroll",ge)}),se(()=>{l.scrollToIndex,J(),l.scrollToOffset,h().length,l.sizingCalculator,he()}),se(()=>{n(O),n(z),he()}),se(()=>{n(y).scrollChangeReason===U.REQUESTED?ae(n(y).offset):le()});let o={};async function he(){if(!$)return;l.scrollToIndex&&l.scrollToOffset&&console.log("VirtualList: scrollToIndex and scrollToOffset MUST NOT be used together.");const t=(o==null?void 0:o.scrollToIndex)!==l.scrollToIndex||(o==null?void 0:o.scrollToAlignment)!==J(),e=(o==null?void 0:o.modelCount)!==h().length||(o==null?void 0:o.sizingCalculator)!==l.sizingCalculator||(o==null?void 0:o.avgSizeInPx)!==n(Z)||(o==null?void 0:o.clientHeight)!==n(N)||(o==null?void 0:o.clientWidth)!==n(V);if(e&&await ze(),(o==null?void 0:o.scrollToOffset)!==l.scrollToOffset?F(y,W({offset:l.scrollToOffset||0,scrollChangeReason:U.REQUESTED})):typeof l.scrollToIndex=="number"&&(t||e)&&F(y,W({offset:ne(l.scrollToIndex),scrollChangeReason:U.REQUESTED})),l.onVisibleRangeUpdate&&((o==null?void 0:o.startIdx)!==n(O)||(o==null?void 0:o.endIdx)!==n(z))){const i=ve(b()?n(V):n(N),n(y).offset);l.onVisibleRangeUpdate(i)}o={scrollToIndex:l.scrollToIndex,scrollToAlignment:J(),scrollToOffset:l.scrollToOffset,modelCount:h().length,sizingCalculator:l.sizingCalculator,avgSizeInPx:n(Z),clientHeight:n(N),clientWidth:n(V),startIdx:n(O),endIdx:n(z)}}async function ze(t=0){k=Math.min(k,t-1),await le()}function ge(t){var a;const e=b()?_.scrollLeft:_.scrollTop;t.target!==_||e<0||n(y).offset===e||(ee==null?void 0:ee.offset)!==e&&(console.log(n(S)),F(y,W({offset:e,scrollChangeReason:U.OBSERVED})),(a=l.onAfterScroll)==null||a.call(l,{offset:e,event:t}))}function ne(t,e=J(),a=h().length){return t<0?t=0:t>=a&&(t=a-1),Ce(e,b()?n(V):n(N),n(y).offset,t)}function Ce(t=Q.START,e,a,i){if(e<=0)return 0;const s=n(S)[i],r=n(T)[i],f=r-e+s;let c;switch(t){case Q.END:c=f;break;case Q.CENTER:c=r-(e-s)/2;break;case Q.START:c=r;break;default:c=Math.max(f,Math.min(r,a))}return Math.max(0,Math.min(K()-e,c))}function Re(t){if(isNaN(t))throw Error(`Invalid offset ${t} specified`);t=Math.max(0,t);const e=De(),a=Math.max(0,k);return e.offset>=t?me(0,a,t):Fe(a,t)}function De(){return k>=0?{offset:n(T)[k],size:n(S)[k]}:{offset:0,size:0}}function me(t,e,a){let i=0,s=0;for(;t<=e;){if(i=t+Math.floor((e-t)/2),s=n(T)[i],s===a)return i;s<a?t=i+1:s>a&&(e=i-1)}return t>0?t-1:0}function Fe(t,e){let a=1;for(;t<h().length&&n(T)[t]<e;)t+=a,a*=2;return me(Math.floor(t/2),Math.min(t,h().length-1),e)}async function le(){n(Z)||F(Z,W(Me()));const t=ve(b()?n(V):n(N),n(y).offset,Ee);F(O,W(t.start)),F(z,W(t.end)),await He();let e=0;const a={},i=q()?E.querySelector("tbody").children:E.children;for(let s=0;s<i.length;(s+=1)-1){const r=i[s],f=getComputedStyle(r),c=f.position;if(c&&["absolute","fixed"].includes(c))continue;const d=f.display!=="none"?Te(r):0,m=n(O)+e;a[m]=(a[m]||0)+d,e+=1}for(const s of Object.keys(a)){const r=parseInt(s);n(te)[r]!==a[r]&&(n(te)[r]=a[r])}}function Me(){const e=[],a=q()?E.querySelector("tbody").children:E.children;for(let i=0;i<a.length;(i+=1)-1){const s=a[i],r=getComputedStyle(s);if(["absolute","fixed"].includes(r.position))continue;const f=Te(s);if(e.push(f),e.length>=10)break}return e.length===0?0:e.reduce((i,s)=>i+s,0)/e.length}function Ue(t){const e=getComputedStyle(t);let a=parseFloat(b()?e.width:e.height);return e.boxSizing==="border-box"&&(b()?a-=parseFloat(e.borderLeftWidth)-parseFloat(e.borderRightWidth):a-=parseFloat(e.borderTopWidth)-parseFloat(e.borderBottomWidth)),a}function ve(t=0,e,a=0){if(K()===0)return{start:0,end:0};const i=e+t;let s=Re(e);if(s===void 0)throw Error(`Invalid offset ${e} specified`);let r=n(T)[s]+n(S)[s],f=s;for(;r<i&&f<h().length-1;)f+=1,r+=n(S)[f];return a>0&&(s=Math.max(0,s-a),f=Math.min(f+a,h().length-1)),{start:s,end:f}}function Te(t){const e=getComputedStyle(t);let a=Ue(t);return b()?a+=parseFloat(e.borderLeftWidth)+parseFloat(e.borderRightWidth)+parseFloat(e.marginLeft)+parseFloat(e.marginRight):a+=parseFloat(e.borderTopWidth)+parseFloat(e.borderBottomWidth)+parseFloat(e.marginTop)+parseFloat(e.marginBottom),Number.isNaN(a)?0:a}function ae(t){if("scroll"in _){const e={behavior:Se()};e[b()?"left":"top"]=t,_.scroll(e)}else _[b()?"scrollLeft":"scrollTop"]=t}var C=Je();ie(C,t=>_=t,()=>_);const We=A(()=>fe("vtlist",ye()));var we=G(C);w(we,q,t=>{var e=qe(),a=v(e);ie(a,c=>E=c,()=>E);var i=G(a);w(i,()=>l.header,c=>{var d=x(),m=v(d);M(m,()=>l.header),g(c,d)});var s=X(i),r=G(s);w(r,j,c=>{var d=x(),m=v(d);Y(m,17,h,P,(R,D,B)=>{var L=x(),Ae=v(L);M(Ae,()=>l.vl_slot,()=>({index:B,item:n(D)})),g(R,L)}),g(c,d)},c=>{var d=x(),m=v(d);Y(m,17,()=>n(de),P,(R,D)=>{var B=x(),L=v(B);M(L,()=>l.vl_slot,()=>n(D)),g(R,B)}),g(c,d)}),p(s),p(a);var f=X(a,2);w(f,()=>l.footer,c=>{var d=x(),m=v(d);M(m,()=>l.footer),g(c,d)}),oe(()=>re(a,"style",n(ue))),g(t,e)},t=>{var e=Ze();ie(e,r=>E=r,()=>E);var a=G(e);w(a,()=>l.header,r=>{var f=x(),c=v(f);M(c,()=>l.header),g(r,f)});var i=X(a,2);w(i,j,r=>{var f=x(),c=v(f);Y(c,17,h,P,(d,m,R)=>{var D=x(),B=v(D);M(B,()=>l.vl_slot,()=>({index:R,item:n(m)})),g(d,D)}),g(r,f)},r=>{var f=x(),c=v(f);Y(c,17,()=>n(de),P,(d,m)=>{var R=x(),D=v(R);M(D,()=>l.vl_slot,()=>n(m)),g(d,R)}),g(r,f)});var s=X(i,2);w(s,()=>l.footer,r=>{var f=x(),c=v(f);M(c,()=>l.footer),g(r,f)}),p(e),oe(()=>re(e,"style",n(ue))),g(t,e)}),p(C),oe(()=>{Qe(C,n(We)),re(C,"style",n(Oe))}),xe(C,"clientHeight",t=>F(N,t)),xe(C,"clientWidth",t=>F(V,t)),g(u,C),Be()}var be=(u=>(u.AUTO="auto",u.SMOOTH="smooth",u.INSTANT="instant",u))(be||{}),Q=(u=>(u.AUTO="auto",u.START="start",u.CENTER="center",u.END="end",u))(Q||{});export{Q as A,be as S,Le as V};
